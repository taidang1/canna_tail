(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[767],{8201:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"}),"AccountCircle");t.Z=o},2510:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)([(0,i.jsx)("path",{d:"M15 17h2v-3h1v-2l-1-5H2l-1 5v2h1v6h9v-6h4v3zm-6 1H4v-4h5v4zM2 4h15v2H2z"},"0"),(0,i.jsx)("path",{d:"M20 18v-3h-2v3h-3v2h3v3h2v-3h3v-2z"},"1")],"AddBusiness");t.Z=o},8904:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-5h2v5zm4 0h-2v-3h2v3zm0-5h-2v-2h2v2zm4 5h-2V7h2v10z"}),"Analytics");t.Z=o},4036:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M5 10h2v7H5zm6 0h2v7h-2zm11-4L12 1 2 6v2h20zM2 19v2h12.4c-.21-.64-.32-1.31-.36-2H2zm17-6.74V10h-2v3.26zM20 14l-4 2v2.55c0 2.52 1.71 4.88 4 5.45 2.29-.57 4-2.93 4-5.45V16l-4-2zm-.72 7-2.03-2.03 1.06-1.06.97.97 2.41-2.38 1.06 1.06L19.28 21z"}),"AssuredWorkload");t.Z=o},1811:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");t.Z=o},2341:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.88 15.76V19h-1.75v-1.29c-.74-.18-2.39-.77-3.02-2.96l1.65-.67c.06.22.58 2.09 2.4 2.09.93 0 1.98-.48 1.98-1.61 0-.96-.7-1.46-2.28-2.03-1.1-.39-3.35-1.03-3.35-3.31 0-.1.01-2.4 2.62-2.96V5h1.75v1.24c1.84.32 2.51 1.79 2.66 2.23l-1.58.67c-.11-.35-.59-1.34-1.9-1.34-.7 0-1.81.37-1.81 1.39 0 .95.86 1.31 2.64 1.9 2.4.83 3.01 2.05 3.01 3.45 0 2.63-2.5 3.13-3.02 3.22z"}),"Paid");t.Z=o},5472:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2zm13.54-7.1-.71-.7L13 9.29V5h-1v6h6v-1h-4.15z"}),"PhoneCallback");t.Z=o},3158:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z"}),"Shop");t.Z=o},3293:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)([(0,i.jsx)("path",{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62z"},"0"),(0,i.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,i.jsx)("circle",{cx:"15",cy:"13",r:"1"},"2"),(0,i.jsx)("path",{d:"M18 11.03C17.52 8.18 15.04 6 12.05 6c-3.03 0-6.29 2.51-6.03 6.45 2.47-1.01 4.33-3.21 4.86-5.89 1.31 2.63 4 4.44 7.12 4.47z"},"3")],"SupportAgent");t.Z=o},5395:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"Tune");t.Z=o},9350:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)([(0,i.jsx)("path",{d:"M3 6h18v5h2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9v-2H3V6z"},"0"),(0,i.jsx)("path",{d:"M15 12 9 8v8zm7.71 6.43c.03-.29.04-.58.01-.86l1.07-.85c.1-.08.12-.21.06-.32l-1.03-1.79c-.06-.11-.19-.15-.31-.11l-1.28.5c-.23-.17-.48-.31-.75-.42l-.2-1.36c-.02-.13-.12-.22-.25-.22h-2.07c-.12 0-.23.09-.25.21l-.2 1.36c-.26.11-.51.26-.74.42l-1.28-.5c-.12-.05-.25 0-.31.11l-1.03 1.79c-.06.11-.04.24.06.32l1.07.86c-.03.29-.04.58-.01.86l-1.07.85c-.1.08-.12.21-.06.32l1.03 1.79c.06.11.19.15.31.11l1.27-.5c.23.17.48.31.75.42l.2 1.36c.02.12.12.21.25.21h2.07c.12 0 .23-.09.25-.21l.2-1.36c.26-.11.51-.26.74-.42l1.28.5c.12.05.25 0 .31-.11l1.03-1.79c.06-.11.04-.24-.06-.32l-1.06-.85zM19 19.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},"1")],"VideoSettings");t.Z=o},3867:function(e,t,r){"use strict";var a=r(4836);t.Z=void 0;var n=a(r(4938)),i=r(5893),o=(0,n.default)((0,i.jsx)("path",{d:"M1 11h4v11H1zm15-7.75C16.65 2.49 17.66 2 18.7 2 20.55 2 22 3.45 22 5.3c0 2.27-2.91 4.9-6 7.7-3.09-2.81-6-5.44-6-7.7C10 3.45 11.45 2 13.3 2c1.04 0 2.05.49 2.7 1.25zM20 17h-7l-2.09-.73.33-.94L13 16h2.82c.65 0 1.18-.53 1.18-1.18 0-.49-.31-.93-.77-1.11L8.97 11H7v9.02L14 22l8.01-3c-.01-1.1-.9-2-2.01-2z"}),"VolunteerActivism");t.Z=o},4612:function(e,t,r){"use strict";r.d(t,{Z:function(){return H}});var a=r(3366),n=r(7462),i=r(7294),o=r(6010),s={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},l=r(4780),u=r(2734),c=r(8216),d=r(8785),f=r(2627),p=r(8791),v=r(8031),h=r(8169),_=r(5893),m=(0,h.Z)((0,_.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),y=(0,h.Z)((0,_.jsx)("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder"),b=r(4502),g=r(1007),w=r(1588),E=r(4867);function T(e){return(0,E.Z)("MuiRating",e)}let k=(0,w.Z)("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),x=["value"],O=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function D(e,t){return null==e?e:Number((Math.round(e/t)*t).toFixed(function(e){let t=e.toString().split(".")[1];return t?t.length:0}(t)))}let R=e=>{let{classes:t,size:r,readOnly:a,disabled:n,emptyValueFocused:i,focusVisible:o}=e,s={root:["root",`size${(0,c.Z)(r)}`,n&&"disabled",o&&"focusVisible",a&&"readOnly"],label:["label","pristine"],labelEmptyValue:[i&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return(0,l.Z)(s,T,t)},A=(0,g.ZP)("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${k.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${(0,c.Z)(r.size)}`],r.readOnly&&t.readOnly]}})(({theme:e,ownerState:t})=>(0,n.Z)({display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent",[`&.${k.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${k.focusVisible} .${k.iconActive}`]:{outline:"1px solid #999"},[`& .${k.visuallyHidden}`]:s},"small"===t.size&&{fontSize:e.typography.pxToRem(18)},"large"===t.size&&{fontSize:e.typography.pxToRem(30)},t.readOnly&&{pointerEvents:"none"})),S=(0,g.ZP)("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:e},t)=>[t.label,e.emptyValueFocused&&t.labelEmptyValueActive]})(({ownerState:e})=>(0,n.Z)({cursor:"inherit"},e.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),P=(0,g.ZP)("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.icon,r.iconEmpty&&t.iconEmpty,r.iconFilled&&t.iconFilled,r.iconHover&&t.iconHover,r.iconFocus&&t.iconFocus,r.iconActive&&t.iconActive]}})(({theme:e,ownerState:t})=>(0,n.Z)({display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:(e.vars||e).palette.action.disabled})),L=(0,g.ZP)("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>(0,g.Dz)(e)&&"iconActive"!==e,overridesResolver:(e,t)=>{let{iconActive:r}=e;return[t.decimal,r&&t.iconActive]}})(({iconActive:e})=>(0,n.Z)({position:"relative"},e&&{transform:"scale(1.2)"}));function q(e){let t=(0,a.Z)(e,x);return(0,_.jsx)("span",(0,n.Z)({},t))}function I(e){let{classes:t,disabled:r,emptyIcon:a,focus:s,getLabelText:l,highlightSelectedOnly:u,hover:c,icon:f,IconContainerComponent:p,isActive:v,itemValue:h,labelProps:m,name:y,onBlur:b,onChange:g,onClick:w,onFocus:E,readOnly:T,ownerState:k,ratingValue:x,ratingValueRounded:O}=e,D=u?h===x:h<=x,R=h<=c,A=h<=s,L=(0,d.Z)(),q=(0,_.jsx)(P,{as:p,value:h,className:(0,o.Z)(t.icon,D?t.iconFilled:t.iconEmpty,R&&t.iconHover,A&&t.iconFocus,v&&t.iconActive),ownerState:(0,n.Z)({},k,{iconEmpty:!D,iconFilled:D,iconHover:R,iconFocus:A,iconActive:v}),children:a&&!D?a:f});return T?(0,_.jsx)("span",(0,n.Z)({},m,{children:q})):(0,_.jsxs)(i.Fragment,{children:[(0,_.jsxs)(S,(0,n.Z)({ownerState:(0,n.Z)({},k,{emptyValueFocused:void 0}),htmlFor:L},m,{children:[q,(0,_.jsx)("span",{className:t.visuallyHidden,children:l(h)})]})),(0,_.jsx)("input",{className:t.visuallyHidden,onFocus:E,onBlur:b,onChange:g,onClick:w,disabled:r,value:h,id:L,type:"radio",name:y,checked:h===O})]})}let j=(0,_.jsx)(m,{fontSize:"inherit"}),C=(0,_.jsx)(y,{fontSize:"inherit"});function N(e){return`${e} Star${1!==e?"s":""}`}let M=i.forwardRef(function(e,t){let r=(0,b.Z)({name:"MuiRating",props:e}),{className:s,defaultValue:l=null,disabled:c=!1,emptyIcon:h=C,emptyLabelText:m="Empty",getLabelText:y=N,highlightSelectedOnly:g=!1,icon:w=j,IconContainerComponent:E=q,max:T=5,name:k,onChange:x,onChangeActive:P,onMouseLeave:M,onMouseMove:H,precision:B=1,readOnly:U=!1,size:F="medium",value:V}=r,z=(0,a.Z)(r,O),Z=(0,d.Z)(k),[W,G]=(0,f.Z)({controlled:V,default:l,name:"Rating"}),Q=D(W,B),J=(0,u.Z)(),[{hover:K,focus:Y},$]=i.useState({hover:-1,focus:-1}),X=Q;-1!==K&&(X=K),-1!==Y&&(X=Y);let{isFocusVisibleRef:ee,onBlur:et,onFocus:er,ref:ea}=(0,p.Z)(),[en,ei]=i.useState(!1),eo=i.useRef(),es=(0,v.Z)(ea,eo,t),el=e=>{var t;let r;H&&H(e);let a=eo.current,{right:n,left:i}=a.getBoundingClientRect(),{width:o}=a.firstChild.getBoundingClientRect();r="rtl"===J.direction?(n-e.clientX)/(o*T):(e.clientX-i)/(o*T);let s=D(T*r+B/2,B);s=(t=s)<B?B:t>T?T:t,$(e=>e.hover===s&&e.focus===s?e:{hover:s,focus:s}),ei(!1),P&&K!==s&&P(e,s)},eu=e=>{M&&M(e),$({hover:-1,focus:-1}),P&&-1!==K&&P(e,-1)},ec=e=>{let t=""===e.target.value?null:parseFloat(e.target.value);-1!==K&&(t=K),G(t),x&&x(e,t)},ed=e=>{(0!==e.clientX||0!==e.clientY)&&($({hover:-1,focus:-1}),G(null),x&&parseFloat(e.target.value)===Q&&x(e,null))},ef=e=>{er(e),!0===ee.current&&ei(!0);let t=parseFloat(e.target.value);$(e=>({hover:e.hover,focus:t}))},ep=e=>{-1===K&&(et(e),!1===ee.current&&ei(!1),$(e=>({hover:e.hover,focus:-1})))},[ev,eh]=i.useState(!1),e_=(0,n.Z)({},r,{defaultValue:l,disabled:c,emptyIcon:h,emptyLabelText:m,emptyValueFocused:ev,focusVisible:en,getLabelText:y,icon:w,IconContainerComponent:E,max:T,precision:B,readOnly:U,size:F}),em=R(e_);return(0,_.jsxs)(A,(0,n.Z)({ref:es,onMouseMove:el,onMouseLeave:eu,className:(0,o.Z)(em.root,s,U&&"MuiRating-readOnly"),ownerState:e_,role:U?"img":null,"aria-label":U?y(X):null},z,{children:[Array.from(Array(T)).map((e,t)=>{let r=t+1,a={classes:em,disabled:c,emptyIcon:h,focus:Y,getLabelText:y,highlightSelectedOnly:g,hover:K,icon:w,IconContainerComponent:E,name:Z,onBlur:ep,onChange:ec,onClick:ed,onFocus:ef,ratingValue:X,ratingValueRounded:Q,readOnly:U,ownerState:e_},i=r===Math.ceil(X)&&(-1!==K||-1!==Y);if(B<1){let e=Array.from(Array(1/B));return(0,_.jsx)(L,{className:(0,o.Z)(em.decimal,i&&em.iconActive),ownerState:e_,iconActive:i,children:e.map((t,i)=>{let o=D(r-1+(i+1)*B,B);return(0,_.jsx)(I,(0,n.Z)({},a,{isActive:!1,itemValue:o,labelProps:{style:e.length-1===i?{}:{width:o===X?`${(i+1)*B*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),o)})},r)}return(0,_.jsx)(I,(0,n.Z)({},a,{isActive:i,itemValue:r}),r)}),!U&&!c&&(0,_.jsxs)(S,{className:(0,o.Z)(em.label,em.labelEmptyValue),ownerState:e_,children:[(0,_.jsx)("input",{className:em.visuallyHidden,value:"",id:`${Z}-empty`,type:"radio",name:Z,checked:null==Q,onFocus:()=>eh(!0),onBlur:()=>eh(!1),onChange:ec}),(0,_.jsx)("span",{className:em.visuallyHidden,children:m})]})]}))});var H=M},4125:function(e){e.exports=function(){var e={80:function(e,t,r){e.exports=r(728).default},728:function(e,t,r){"use strict";r.d(t,{default:function(){return tq}});var a=r(48),n=r.n(a),i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},o=function(){return("000000"+(2176782336*Math.random()<<0).toString(36)).slice(-6)},s=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||o()),e.muxId):e},l=function(e){e&&void 0!==e.nodeName?e=s(t=e):t=document.querySelector(e);var t,r=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,r]},u=r(640),c=r.n(u),d=c().methodFactory;c().methodFactory=function(e,t,r){var a=d(e,t,r);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);a.apply(void 0,e)}},c().setLevel(c().getLevel());var f=c();function p(){return"1"===(n().doNotTrack||n().navigator&&n().navigator.doNotTrack)}var v={now:function(){var e=n().performance,t=e&&e.timing,r=t&&t.navigationStart;return Math.round("number"==typeof r&&"function"==typeof e.now?r+e.now():Date.now())}},h=function(e){return _(e)[0]},_=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,r=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return r&&(t=(r.match(/[^\.]+\.[^\.]+$/)||[])[0]),[r,t]},m={exists:function(){var e=n().performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=n().performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=n().performance,t=e&&e.timing;return t&&t.navigationStart}};function y(e,t,r){r=void 0===r?1:r,e[t]=e[t]||0,e[t]+=r}var b=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],g=["x-cdn","content-type"].concat(b);function w(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach(function(e){if(e){var r=e.split(": "),a=r.shift();a&&(g.indexOf(a.toLowerCase())>=0||0===a.toLowerCase().indexOf("x-litix-"))&&(t[a]=r.join(": "))}}),t}function E(e){if(e){var t=b.find(function(t){return void 0!==e[t]});return t?e[t]:void 0}}var T=function(e){var t={};for(var r in e){var a=e[r];-1!==a["DATA-ID"].search("io.litix.data.")&&(t[a["DATA-ID"].replace("io.litix.data.","")]=a.VALUE)}return t};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){var a,n;a=e,n=r[t],t in a?Object.defineProperty(a,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O=function(e){if(!e)return{};var t=m.navigationStart(),r=e.loading,a=r?r.start:e.trequest,n=r?r.first:e.tfirst,i=r?r.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+a),responseStart:Math.round(t+n),responseEnd:Math.round(t+i)}},D=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return w(e.getAllResponseHeaders())};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){var a,n;a=e,n=r[t],t in a?Object.defineProperty(a,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var r=e.getRequests({state:"executed"});if(0===r.length)return{};var a,n=r[r.length-1],i=h(n.url),o=n.url,s=n.bytesLoaded,l=new Date(n.requestStartDate).getTime(),u=new Date(n.firstByteDate).getTime(),c=new Date(n.requestEndDate).getTime(),d=isNaN(n.duration)?0:n.duration,f="function"==typeof t.getMetricsFor?t.getMetricsFor(n.mediaType).HttpList:t.getDashMetrics().getHttpRequests(n.mediaType);return f.length>0&&(a=w(f[f.length-1]._responseHeaders||"")),{requestStart:l,requestResponseStart:u,requestResponseEnd:c,requestBytesLoaded:s,requestResponseHeaders:a,requestMediaDuration:d,requestHostname:i,requestUrl:o,requestId:a?E(a):void 0}},P=function(e,t){var r=t.getQualityFor(e),a=t.getCurrentTrackFor(e).bitrateList;return a?{currentLevel:r,renditionWidth:a[r].width||null,renditionHeight:a[r].height||null,renditionBitrate:a[r].bandwidth}:{}},L=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]};function q(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var I=0,j=function(){var e,t;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r)}return e=[{key:"on",value:function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++I,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(e,a){e._eventEmitterGuid===t._eventEmitterGuid&&r.splice(a,1)})}},{key:"one",value:function(e,t,r){var a=this;t._eventEmitterGuid=t._eventEmitterGuid||++I;var n=function n(){a.off(e,n),t.apply(r||this,arguments)};n._eventEmitterGuid=t._eventEmitterGuid,this.on(e,n)}},{key:"emit",value:function(e,t){var r=this;if(this._listeners){t=t||{};var a=this._listeners["before*"]||[],n=this._listeners[e]||[],i=this._listeners["after"+e]||[],o=function(t,a){(t=t.slice()).forEach(function(t){t.call(r,{type:e},a)})};o(a,t),o(n,t),o(i,t)}}}],q(r.prototype,e),t&&q(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function C(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var N=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){r._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("seeking",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){null!==r._playbackHeartbeatInterval&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(t,a){null!==r._playbackHeartbeatInterval&&(n().clearInterval(r._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:a.viewer_time}),r._playbackHeartbeatInterval=null)})}return C(t.prototype,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=n().setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(n().clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e&&C(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function M(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var H=(e2=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("viewinit",function(){r.viewErrored=!1}),t.on("error",function(e,a){try{var n=t.errorTranslator({player_error_code:a.player_error_code,player_error_message:a.player_error_message,player_error_context:a.player_error_context});n?(t.data.player_error_code=n.player_error_code||a.player_error_code,t.data.player_error_message=n.player_error_message||a.player_error_message,t.data.player_error_context=n.player_error_context||a.player_error_context,r.viewErrored=!0):(delete t.data.player_error_code,delete t.data.player_error_message,delete t.data.player_error_context)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),r.viewErrored=!0}})},e3&&M(e2.prototype,e3),e5&&M(e2,e5),Object.defineProperty(e2,"prototype",{writable:!1}),e2);function B(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var U=function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return B(t.prototype,[{key:"_updateWatchTime",value:function(e,t){var r=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=r),y(this.pm.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e&&B(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function F(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var V=function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,e.on("playbackheartbeat",this._updatePlaybackTime.bind(this)),e.on("playbackheartbeatend",this._clearPlaybackTimeState.bind(this)),e.on("seeking",this._clearPlaybackTimeState.bind(this))}return F(t.prototype,[{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time;if(this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition){var t=e-this._playbackTimeTrackerLastPlayheadPosition;t<=1e3&&y(this.pm.data,"view_content_playback_time",t)}this._playbackTimeTrackerLastPlayheadPosition=e}},{key:"_clearPlaybackTimeState",value:function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1}}]),e&&F(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function z(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Z=function(){var e,t;function r(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return e=[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var r=this,a=function(){r.pm.currentFragmentPDT&&r.pm.currentFragmentStart&&(r.pm.data.player_program_time=r.pm.currentFragmentPDT+r.pm.data.player_playhead_time-r.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,a(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var n=this.pm.getPlayheadTime();void 0!==n&&(this.pm.data.player_playhead_time=n,a(),this._updateMaxPlayheadPosition())}}}],z(r.prototype,e),t&&z(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function W(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var G=(e4=function e(t){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t.disableRebufferTracking){var r,a=function(e,t){n(t),r=void 0},n=function(e){if(r){var a=e.viewer_time-r;y(t.data,"view_rebuffer_duration",a),r=e.viewer_time,t.data.view_rebuffer_duration>3e5&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(3e5,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",function(e,t){return n(t)}),t.on("rebufferstart",function(e,n){r||(y(t.data,"view_rebuffer_count",1),r=n.viewer_time,t.one("rebufferend",a))}),t.on("viewinit",function(){r=void 0,t.off("rebufferend",a)})}},e8&&W(e4.prototype,e8),e6&&W(e4,e6),Object.defineProperty(e4,"prototype",{writable:!1}),e4);function Q(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var J=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,e.disableRebufferTracking||e.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){r._cleanupRebufferTracker(null,{viewer_time:v.now()})}))}return Q(t.prototype,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime){if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&r>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0)}else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var a=this.pm.data.player_playhead_time-this._lastPlayheadTime,n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&a>0&&n-a>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+n-a}))}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e&&Q(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function K(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Y=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,e.on("viewinit",function(){var t=e.data,a=t.view_id;if(!t.view_program_changed){var n=function(t,n){var i=n.viewer_time;"playing"===t.type&&void 0===e.data.view_time_to_first_frame?r.calculateTimeToFirstFrame(i||v.now(),a):"adplaying"===t.type&&(void 0===e.data.view_time_to_first_frame||r._inPrerollPosition())&&r.calculateTimeToFirstFrame(i||v.now(),a)};e.one("playing",n),e.one("adplaying",n),e.one("viewend",function(){e.off("playing",n),e.off("adplaying",n)})}})}return K(t.prototype,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e&&K(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function $(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var X=(e7=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("viewinit",function(){r._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach(function(e){t.on(e,function(){if(r._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var e=t.data.player_playhead_time-r._lastPlayheadPosition;if(e<0)return void(r._lastPlayheadPosition=-1);var a=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),n=Math.max(0,a-1),i=Math.max(0,1-a);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,n),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,i),y(t.data,"view_total_content_playback_time",e),y(t.data,"view_total_upscaling",n*e),y(t.data,"view_total_downscaling",i*e)}r._lastPlayheadPosition=-1})}),["playing","hb"].forEach(function(e){t.on(e,function(){r._lastPlayheadPosition=t.data.player_playhead_time,r._lastPlayerWidth=t.data.player_width,r._lastPlayerHeight=t.data.player_height,r._lastSourceWidth=t.data.video_source_width,r._lastSourceHeight=t.data.video_source_height})})},e9&&$(e7.prototype,e9),te&&$(e7,te),Object.defineProperty(e7,"prototype",{writable:!1}),e7);function ee(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var et=(tt=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.isSeeking=!1,t.on("seeking",function(e,a){Object.assign(t.data,a),r._lastSeekingTime=v.now(),!1===r.isSeeking&&(r.isSeeking=!0,t.send("seeking"))}),t.on("seeked",function(){r.isSeeking=!1;var e=r._lastSeekingTime||v.now(),a=v.now()-e;y(t.data,"view_seek_count",1),y(t.data,"view_seek_duration",a);var n=t.data.view_max_seek_time||0;t.data.view_max_seek_time=Math.max(n,a)}),t.on("viewend",function(){r.isSeeking=!1})},tr&&ee(tt.prototype,tr),ta&&ee(tt,ta),Object.defineProperty(tt,"prototype",{writable:!1}),tt);function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ea(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ea(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function en(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ei=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},eo=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],es=function(){var e,t;function r(e){var t=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),eo.forEach(function(r){return e.on(r,t._updateAdData.bind(t))});var a=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",a),e.on("playing",a),e.on("viewend",a),e.on("adrequest",function(r,a){a=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},a),ei(t._adRequests,a),y(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||y(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(r,a){a=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},a),ei(t._adResponses,a);var n=t.findAdRequest(a.ad_request_id);n&&y(e.data,"view_ad_request_time",Math.max(0,a.viewer_time-n.viewer_time))}),e.on("adplay",function(r,a){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,y(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,a.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,a.viewer_time-e.data.view_start)),t._prerollPlayTime=a.viewer_time)}),e.on("adplaying",function(r,a){t.inPrerollPosition()&&void 0===e.data.view_preroll_load_time&&void 0!==t._prerollPlayTime&&(e.data.view_preroll_load_time=a.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=a.viewer_time-t._prerollPlayTime)}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return e=[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=er(_(t.ad_tag_url),2),a=r[0],n=r[1];this.pm.data.view_preroll_ad_tag_domain=n,this.pm.data.view_preroll_ad_tag_hostname=a}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var i=er(_(t.ad_asset_url),2),o=i[0],s=i[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}],en(r.prototype,e),t&&en(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function el(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var eu=(tn=function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var r,a,i=function(){t.disableRebufferTracking||r&&(y(t.data,"view_waiting_rebuffer_duration",v.now()-r),r=!1,n().clearInterval(a))},o=!1,s=function(){o=!1,i()};t.on("waiting",function(){o&&(t.disableRebufferTracking||(y(t.data,"view_waiting_rebuffer_count",1),r=v.now(),a=n().setInterval(function(){if(r){var e=v.now();y(t.data,"view_waiting_rebuffer_duration",e-r),r=e}},250)))}),t.on("playing",function(){i(),o=!0}),t.on("pause",s),t.on("seeking",s)},ti&&el(tn.prototype,ti),to&&el(tn,to),Object.defineProperty(tn,"prototype",{writable:!1}),tn);function ec(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ed=(ts=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var a=function(){r.lastWallClockTime=v.now(),t.on("before*",n)},n=function(e){var a=v.now(),n=r.lastWallClockTime;r.lastWallClockTime=a,a-n>3e4&&(t.emit("devicesleep",{viewer_time:n}),Object.assign(t.data,{viewer_time:n}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:a}),Object.assign(t.data,{viewer_time:a}),t.send("devicewake"))};t.one("playbackheartbeat",a),t.on("playbackheartbeatend",function(){t.off("before*",n),t.one("playbackheartbeat",a)})},tl&&ec(ts.prototype,tl),tu&&ec(ts,tu),Object.defineProperty(ts,"prototype",{writable:!1}),ts),ef=r(375),ep=r(655),ev=r.n(ep),eh="muxData",e_=function(){var e;try{e=ef.parse(ev().get(eh)||"")}catch(t){e={}}return e},em=function(e){try{ev().set(eh,ef.stringify(e),{expires:7300})}catch(e){}},ey=function(){var e=e_();return e.mux_viewer_id=e.mux_viewer_id||i(),e.msn=e.msn||Math.random(),em(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},eb=function(){var e;switch(eg()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},eg=function(){var e=n().navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};eb.getConnectionFromAPI=eg;var ew=eT({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),eE=eT({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ep:"experiments",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function eT(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function ek(e){var t={},r={};return Object.keys(e).forEach(function(a){var n=!1;if(e.hasOwnProperty(a)&&void 0!==e[a]){var i=a.split("_"),o=i[0],s=ew[o];s||(f.info("Data key word `"+i[0]+"` not expected in "+a),s=o+"_"),i.splice(1).forEach(function(e){"url"===e&&(n=!0),eE[e]?s+=eE[e]:Number(e)&&Math.floor(Number(e))===Number(e)?s+=e:(f.info("Data key word `"+e+"` not expected in "+a),s+="_"+e+"_")}),n?r[s]=e[a]:t[s]=e[a]}}),Object.assign(t,r)}var ex={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},eO=["hb","requestcompleted","requestfailed","requestcanceled"],eD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},ex,t)};eD.prototype.queueEvent=function(e,t){var r=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},eD.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},eD.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),n().clearTimeout(this._sendTimeout)},eD.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],ek({mux_view_message:"event queue truncated"}));var r=this._createPayload(t);eR(this._beaconUrl,r,!0,function(){})},eD.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(t),a=v.now();eR(this._beaconUrl,r,!1,function(r,n){n?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,f.info("Error sending beacon: "+n)):e._failureCount=0,e._roundTripTime=v.now()-a,e._postInFlight=!1})}},eD.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},eD.prototype._startBeaconSending=function(){var e=this;n().clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=n().setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},eD.prototype._createPayload=function(e){var t,r,a,n=this,i={transmission_timestamp:Math.round(v.now())};this._roundTripTime&&(i.rtt_ms=Math.round(this._roundTripTime));var o=function(){a=(t=JSON.stringify({metadata:i,events:r||e})).length/1024},s=function(){return a<=n._options.maxPayloadKBSize};return o(),s()||(f.info("Payload size is too big ("+a+" kb). Removing unnecessary events."),r=e.filter(function(e){return -1===eO.indexOf(e.e)}),o()),s()||(f.info("Payload size still too big ("+a+" kb). Cropping fields.."),r.forEach(function(e){for(var t in e){var r=e[t];"string"==typeof r&&r.length>51200&&(e[t]=r.substring(0,51200))}}),o()),t};var eR=function(e,t,r,a){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))a();else if(n().fetch)n().fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:t.length<=57344}).then(function(e){return a(null,e.ok?null:"Error")}).catch(function(e){return a(null,e)});else{if(n().XMLHttpRequest){var i=new(n()).XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return a(null,200!==i.status?"error":void 0)},i.open("POST",e),i.setRequestHeader("Content-Type","text/plain"),void i.send(t)}a()}};function eA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function eP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(t){eI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eL(e){return(eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eq(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function eI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ej=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],eC=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse"],eN=["viewstart","error","ended","viewend"],eM=function(){var e,t;function r(e,t){var a,i,o,s,l,u,c,d,f,p,v,h,_,m,y,b,g,w,E,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),eI(this,"previousBeaconData",null),eI(this,"lastEventTime",0),eI(this,"rateLimited",!1),this.mux=e,this.envKey=t,this.options=T,this.eventQueue=new eD((a=this.envKey,o=(i=this.options).beaconCollectionDomain,s=i.beaconDomain,o?"https://"+o:(a=a||"inferred").match(/^[a-z0-9]+$/)?"https://"+a+"."+(s||"litix.io"):"https://img.litix.io/a.gif")),this.sampleRate=null!==(l=this.options.sampleRate)&&void 0!==l?l:1,this.disableCookies=null!==(u=this.options.disableCookies)&&void 0!==u&&u,this.respectDoNotTrack=null!==(c=this.options.respectDoNotTrack)&&void 0!==c&&c,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(d=this.options.platform)||void 0===d?void 0:d.name,viewer_application_version:null===(f=this.options.platform)||void 0===f?void 0:f.version,viewer_application_engine:null===(p=this.options.platform)||void 0===p?void 0:p.layout,viewer_device_name:null===(v=this.options.platform)||void 0===v?void 0:v.product,viewer_device_category:"",viewer_device_manufacturer:null===(h=this.options.platform)||void 0===h?void 0:h.manufacturer,viewer_os_family:null===(_=this.options.platform)||void 0===_||null===(m=_.os)||void 0===m?void 0:m.family,viewer_os_architecture:null===(y=this.options.platform)||void 0===y||null===(b=y.os)||void 0===b?void 0:b.architecture,viewer_os_version:null===(g=this.options.platform)||void 0===g||null===(w=g.os)||void 0===w?void 0:w.version,viewer_connection_type:eb(),page_url:null===n()||void 0===n()||null===(E=n().location)||void 0===E?void 0:E.href},this.viewerData=this.disableCookies?{}:ey()}return e=[{key:"send",value:function(e,t){var r;if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&p())return f.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==eL(t))return f.error("A data object was expected in send() but was not provided");var a,n,o=this.disableCookies?{}:(a=e_(),n=v.now(),a.session_start&&(a.sst=a.session_start,delete a.session_start),a.session_id&&(a.sid=a.session_id,delete a.session_id),a.session_expires&&(a.sex=a.session_expires,delete a.session_expires),(!a.sex||a.sex<n)&&(a.sid=i(),a.sst=n),a.sex=n+15e5,em(a),{session_id:a.sid,session_start:a.sst,session_expires:a.sex}),s=eP(eP(eP(eP(eP({},this.pageLevelData),t),o),this.viewerData),{},{event:e,env_key:this.envKey});s.user_id&&(s.viewer_user_id=s.user_id,delete s.user_id);var l=(null!==(r=s.mux_sample_number)&&void 0!==r?r:0)>=this.sampleRate,u=ek(this._deduplicateBeaconData(e,s));if(this.lastEventTime=this.mux.utils.now(),l)return f.info("Not sending event due to sample rate restriction",e,s,u);if(this.envKey||f.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,s,u),!this.rateLimited){if(f.info("Sending event",e,s,u),this.rateLimited=!this.eventQueue.queueEvent(e,u),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):eN.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return s.event="eventrateexceeded",u=ek(s),this.eventQueue.queueEvent(s.event,u),f.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var r=this,a={},n=t.view_id;if("-1"===n||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)a=eP({},t),n&&(this.previousBeaconData=a),n&&"viewend"===e&&(this.previousBeaconData=null);else{var i=0===e.indexOf("request");Object.entries(t).forEach(function(t){var n=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eA(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],s=n[1];r.previousBeaconData&&(s!==r.previousBeaconData[o]||ej.indexOf(o)>-1||r.objectHasChanged(i,o,s,r.previousBeaconData[o])||r.eventRequiresKey(e,o))&&(a[o]=s,r.previousBeaconData[o]=s)})}return a}},{key:"objectHasChanged",value:function(e,t,r,a){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===eL(r)&&"object"===eL(a)&&Object.keys(r||{}).length===Object.keys(a||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")||!(0!==t.indexOf("ad_id")||!eC.includes(e))}}],eq(r.prototype,e),t&&eq(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function eH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var eB=(tc=function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var r=0,a=0,n=0,i=0,o=0,s=0,l=0;t.on("requestcompleted",function(e,s){var l,u,c=s.request_start,d=s.request_response_start,f=s.request_response_end,p=s.request_bytes_loaded;if(i++,d?(l=d-(null!=c?c:0),u=(null!=f?f:0)-d):u=(null!=f?f:0)-(null!=c?c:0),u>0&&p&&p>0){var v=p/u*8e3;o++,a+=p,n+=u,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,v),t.data.view_average_request_throughput=a/n*8e3,t.data.view_request_count=i,l>0&&(r+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=r/o)}}),t.on("requestfailed",function(e,r){i++,s++,t.data.view_request_count=i,t.data.view_request_failed_count=s}),t.on("requestcanceled",function(e,r){i++,l++,t.data.view_request_count=i,t.data.view_request_canceled_count=l})},td&&eH(tc.prototype,td),tf&&eH(tc,tf),Object.defineProperty(tc,"prototype",{writable:!1}),tc);function eU(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var eF=(tp=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("before*",function(e,a){var n=a.viewer_time,i=v.now(),o=r._lastEventTime;if(r._lastEventTime=i,o&&i-o>36e5){var s=Object.keys(t.data).reduce(function(e,r){var a,n;return 0===r.indexOf("video_")?Object.assign(e,(a={},n=t.data[r],r in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,a)):e},{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:n},s)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:n}),"playing"!==e.type&&t.emit("playing",{viewer_time:n}))}})},tv&&eU(tp.prototype,tv),th&&eU(tp,th),Object.defineProperty(tp,"prototype",{writable:!1}),tp);function eV(e){return(eV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ez(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function eZ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function eW(e,t){return(eW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eG(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eQ(e){return(eQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eJ=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],eK=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eW(e,t)}(o,e);var t,r,a,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=eQ(o);if(t){var a=eQ(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===eV(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eG(e)}(this,e)});function o(e,t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,o),(a=n.call(this)).DOM_CONTENT_LOADED_EVENT_END=m.domContentLoadedEventEnd(),a.NAVIGATION_START=m.navigationStart(),a.mux=e,a.id=t,(r=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},r)).data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),f.setLevel(r.debug?"debug":"warn"),a.getPlayheadTime=r.getPlayheadTime,a.getStateData=r.getStateData||function(){return{}},a.getAdData=r.getAdData||function(){},a.minimumRebufferDuration=r.minimumRebufferDuration,a.sustainedRebufferThreshold=r.sustainedRebufferThreshold,a.playbackHeartbeatTime=r.playbackHeartbeatTime,a.disableRebufferTracking=r.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=r.disablePlayheadRebufferTracking,a.errorTranslator=r.errorTranslator,a.playbackEventDispatcher=new eM(e,r.data.env_key,r),a.data={player_instance_id:i(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconCollectionDomain?r.beaconCollectionDomain:r.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1,a.oldEmit=a.emit,a.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var a,s=(function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(eG(a));a.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)});var l=(function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}).bind(eG(a));if(a.on("videochange",function(e,t){l(t)}),a.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),l(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")}),a.on("fragmentchange",function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart}),a.on("destroy",a.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var u=function(){var e=void 0!==a.data.view_start;a.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",u,!1);var c=function(e){e.persisted||a.destroy()};window.addEventListener("pagehide",c,!1),a.on("destroy",function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",c)})}return a.on("playerready",function(e,t){Object.assign(this.data,t)}),eJ.forEach(function(e){a.on(e,function(t,r){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,r),this._sanitizeData()}),a.on("after"+e,function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)})}),a.on("viewend",function(e,t){Object.assign(a.data,t)}),a.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),a.longResumeTracker=new eF(eG(a)),a.errorTracker=new H(eG(a)),new ed(eG(a)),a.seekingTracker=new et(eG(a)),a.playheadTime=new Z(eG(a)),a.playbackHeartbeat=new N(eG(a)),new X(eG(a)),a.watchTimeTracker=new U(eG(a)),new V(eG(a)),a.adTracker=new es(eG(a)),new J(eG(a)),new G(eG(a)),new Y(eG(a)),new eu(eG(a)),new eB(eG(a)),r.hlsjs&&a.addHLSJS(r),r.dashjs&&a.addDashJS(r),a.emit("viewinit",r.data),a}return r=[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach(function(e){t[e]=void 0}),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var r,a=function(e){if(Array.isArray(e))return e}(r=_(t.video_source_url))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return ez(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ez(e,t):void 0}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=a[0],i=a[1];t.video_source_domain=i,t.video_source_hostname=n}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var r=parseInt(e.data[t],10);e.data[t]=isNaN(r)?void 0:r}),["player_source_url","video_source_url"].forEach(function(t){if(e.data[t]){var r=e.data[t].toLowerCase();0!==r.indexOf("data:")&&0!==r.indexOf("blob:")||(e.data[t]="MSE style URL")}})}},{key:"_resetVideoData",value:function(e,t){var r=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("video_")&&delete r.data[e]})}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(e,t){delete this.data.player_error_code,delete this.data.player_error_message}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=i(),r=function(){t===e.data.view_id&&y(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",r):r()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this.errorTracker.viewErrored||(this._heartBeatTimeout=window.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4))}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,r){var a=arguments.length>4?arguments[4]:void 0,n=e.log,i=e.utils.secondsToMs,o=function(e){var t,r=parseInt(a.version);return 1===r&&null!==e.programDateTime&&(t=e.programDateTime),0===r&&null!==e.pdt&&(t=e.pdt),t};if(m.exists()){var s=function(r,a){return e.emit(t,r,a)},l=function(e,t){var r=t.levels,a=t.audioTracks,n=t.url,i=t.stats,o=t.networkDetails,l=t.sessionData,u={},c={};r.forEach(function(e,t){u[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),a.forEach(function(e,t){c[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var d=O(i),f=d.bytesLoaded,p=d.requestStart,v=d.responseStart,_=d.responseEnd;s("requestcompleted",x(x({},T(l)),{},{request_event_type:e,request_bytes_loaded:f,request_start:p,request_response_start:v,request_response_end:_,request_type:"manifest",request_hostname:h(n),request_response_headers:D(o),request_rendition_lists:{media:u,audio:c,video:{}}}))};r.on(a.Events.MANIFEST_LOADED,l);var u=function(e,t){var r=t.details,a=t.level,n=t.networkDetails,l=O(t.stats),u=l.bytesLoaded,c=l.requestStart,d=l.responseStart,f=l.responseEnd,p=r.fragments[r.fragments.length-1],v=o(p)+i(p.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:u,request_start:c,request_response_start:d,request_response_end:f,request_current_level:a,request_type:"manifest",request_hostname:h(r.url),request_response_headers:D(n),video_holdback:r.holdBack&&i(r.holdBack),video_part_holdback:r.partHoldBack&&i(r.partHoldBack),video_part_target_duration:r.partTarget&&i(r.partTarget),video_target_duration:r.targetduration&&i(r.targetduration),video_source_is_live:r.live,player_manifest_newest_program_time:isNaN(v)?void 0:v})};r.on(a.Events.LEVEL_LOADED,u);var c=function(e,t){var r=t.details,a=t.networkDetails,n=O(t.stats);s("requestcompleted",{request_event_type:e,request_bytes_loaded:n.bytesLoaded,request_start:n.requestStart,request_response_start:n.responseStart,request_response_end:n.responseEnd,request_type:"manifest",request_hostname:h(r.url),request_response_headers:D(a)})};r.on(a.Events.AUDIO_TRACK_LOADED,c);var d=function(e,t){var a=t.stats,n=t.networkDetails,i=t.frag,o=O(a=a||i.stats),l=o.bytesLoaded,u=o.requestStart,c=o.responseStart,d=o.responseEnd,f=n?D(n):void 0,p={request_event_type:e,request_bytes_loaded:l,request_start:u,request_response_start:c,request_response_end:d,request_hostname:n?h(n.responseURL):void 0,request_id:f?E(f):void 0,request_response_headers:f,request_media_duration:i.duration,request_url:null==n?void 0:n.responseURL};"main"===i.type?(p.request_type="media",p.request_current_level=i.level,p.request_video_width=(r.levels[i.level]||{}).width,p.request_video_height=(r.levels[i.level]||{}).height,p.request_labeled_bitrate=(r.levels[i.level]||{}).bitrate):p.request_type=i.type,s("requestcompleted",p)};r.on(a.Events.FRAG_LOADED,d);var f=function(e,t){var r=t.frag,a=r.start;s("fragmentchange",{currentFragmentPDT:o(r),currentFragmentStart:i(a)})};r.on(a.Events.FRAG_CHANGED,f);var p=function(e,t){var r,n=t.type,i=t.details,o=t.response,l=t.fatal,u=t.frag,c=t.networkDetails,d=(null==u?void 0:u.url)||t.url||"",f=c?D(c):void 0;i!==a.ErrorDetails.MANIFEST_LOAD_ERROR&&i!==a.ErrorDetails.MANIFEST_LOAD_TIMEOUT&&i!==a.ErrorDetails.FRAG_LOAD_ERROR&&i!==a.ErrorDetails.FRAG_LOAD_TIMEOUT&&i!==a.ErrorDetails.LEVEL_LOAD_ERROR&&i!==a.ErrorDetails.LEVEL_LOAD_TIMEOUT&&i!==a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&i!==a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT&&i!==a.ErrorDetails.SUBTITLE_LOAD_ERROR&&i!==a.ErrorDetails.SUBTITLE_LOAD_TIMEOUT&&i!==a.ErrorDetails.KEY_LOAD_ERROR&&i!==a.ErrorDetails.KEY_LOAD_TIMEOUT||s("requestfailed",{request_error:i,request_url:d,request_hostname:h(d),request_id:f?E(f):void 0,request_type:i===a.ErrorDetails.FRAG_LOAD_ERROR||i===a.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===a.ErrorDetails.SUBTITLE_LOAD_ERROR||i===a.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===a.ErrorDetails.KEY_LOAD_ERROR||i===a.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==o?void 0:o.code,request_error_text:null==o?void 0:o.text}),l&&s("error",{player_error_code:n,player_error_message:i,player_error_context:"".concat(d?"url: ".concat(d,"\n"):"")+"".concat(o&&(o.code||o.text)?"response: ".concat(o.code,", ").concat(o.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(r=t.err)||void 0===r?void 0:r.message,"\n"):"")})};r.on(a.Events.ERROR,p);var v=function(e,t){var r=t.frag,a=r&&r._url||"";s("requestcanceled",{request_event_type:e,request_url:a,request_type:"media",request_hostname:h(a)})};r.on(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,v);var _=function(e,t){var a=t.level,i=r.levels[a];if(i&&i.attrs&&i.attrs.BANDWIDTH){var o,l=i.attrs.BANDWIDTH,u=parseFloat(i.attrs["FRAME-RATE"]);isNaN(u)||(o=u),l?s("renditionchange",{video_source_fps:o,video_source_bitrate:l,video_source_width:i.width,video_source_height:i.height,video_source_rendition_name:i.name,video_source_codec:null==i?void 0:i.videoCodec}):n.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(a.Events.LEVEL_SWITCHED,_),r._stopMuxMonitor=function(){r.off(a.Events.MANIFEST_LOADED,l),r.off(a.Events.LEVEL_LOADED,u),r.off(a.Events.AUDIO_TRACK_LOADED,c),r.off(a.Events.FRAG_LOADED,d),r.off(a.Events.FRAG_CHANGED,f),r.off(a.Events.ERROR,p),r.off(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,v),r.off(a.Events.LEVEL_SWITCHED,_),r.off(a.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(a.Events.DESTROYING,r._stopMuxMonitor)}else n.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){var e;this.hlsjs&&((e=this.hlsjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,r){var a=e.log;if(r&&r.on){var n=function(r,a){return e.emit(t,r,a)},i=function(e){var t=e.type,r=(e.data||{}).url;n("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:h(r),request_url:r})};r.on("manifestLoaded",i);var o={},s=function(e){var t=e.type,a=e.fragmentModel,i=(e.chunk||{}).mediaInfo||{},s=i.type,l=i.bitrateList,u={};(l=l||[]).forEach(function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}}),"video"===s?o.video=u:"audio"===s?o.audio=u:o.media=u;var c=S(a,r),d=c.requestStart,f=c.requestResponseStart,p=c.requestResponseEnd,v=c.requestResponseHeaders,h=c.requestMediaDuration,_=c.requestHostname,m=c.requestUrl;n("requestcompleted",{request_event_type:t,request_start:d,request_response_start:f,request_response_end:p,request_bytes_loaded:-1,request_type:s+"_init",request_response_headers:v,request_hostname:_,request_id:c.requestId,request_url:m,request_media_duration:h,request_rendition_lists:o})};r.on("initFragmentLoaded",s);var l=function(e){var t=e.type,a=e.fragmentModel,i=e.chunk||{},o=i.mediaInfo,s=i.start,l=(o||{}).type,u=S(a,r),c=u.requestStart,d=u.requestResponseStart,f=u.requestResponseEnd,p=u.requestBytesLoaded,v=u.requestResponseHeaders,h=u.requestMediaDuration,_=u.requestHostname,m=u.requestUrl,y=u.requestId,b=P(l,r),g=b.currentLevel,w=b.renditionWidth,E=b.renditionHeight,T=b.renditionBitrate;n("requestcompleted",{request_event_type:t,request_start:c,request_response_start:d,request_response_end:f,request_bytes_loaded:p,request_type:l,request_response_headers:v,request_hostname:_,request_id:y,request_url:m,request_media_start_time:s,request_media_duration:h,request_current_level:g,request_labeled_bitrate:T,request_video_width:w,request_video_height:E})};r.on("mediaFragmentLoaded",l);var u={video:void 0,audio:void 0,totalBitrate:void 0},c=function(){if(u.video&&"number"==typeof u.video.bitrate){if(u.video.width&&u.video.height){var e=u.video.bitrate;return u.audio&&"number"==typeof u.audio.bitrate&&(e+=u.audio.bitrate),e!==u.totalBitrate?(u.totalBitrate=e,{video_source_bitrate:e,video_source_height:u.video.height,video_source_width:u.video.width,video_source_codec:L(u.video.codec)}):void 0}a.warn("have bitrate info for video but missing width/height")}},d=function(e,t,i){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=r.getBitrateInfoListFor(o).find(function(t){return t.qualityIndex===e.newQuality});if(s&&"number"==typeof s.bitrate){u[o]=A(A({},s),{},{codec:r.getCurrentTrackFor(o).codec});var l=c();l&&n("renditionchange",l)}else a.warn("missing bitrate info for ".concat(o))}}else a.warn("missing evt.newQuality in qualityChangeRendered event",e)};r.on("qualityChangeRendered",d);var f=function(e){var t=e.request,r=e.mediaType;n("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:r,request_hostname:h(t.url)})};r.on("fragmentLoadingAbandoned",f);var p=function(e){var t,r,a=e.error,i=(null==a||null===(t=a.data)||void 0===t?void 0:t.request)||{},o=(null==a||null===(r=a.data)||void 0===r?void 0:r.response)||{};27===(null==a?void 0:a.code)&&n("requestfailed",{request_error:i.type+"_"+i.action,request_url:i.url,request_hostname:h(i.url),request_type:i.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=i&&i.url?"url: ".concat(i.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");n("error",{player_error_code:null==a?void 0:a.code,player_error_message:null==a?void 0:a.message,player_error_context:s})};r.on("error",p),r._stopMuxMonitor=function(){r.off("manifestLoaded",i),r.off("initFragmentLoaded",s),r.off("mediaFragmentLoaded",l),r.off("qualityChangeRendered",d),r.off("error",p),r.off("fragmentLoadingAbandoned",f),delete r._stopMuxMonitor}}else a.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){var e;this.dashjs&&((e=this.dashjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.dashjs=void 0)}}],eZ(o.prototype,r),a&&eZ(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o}(j),eY=r(153),e$=r.n(eY);function eX(e){return(eX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e1(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var e2,e3,e5,e4,e8,e6,e7,e9,te,tt,tr,ta,tn,ti,to,ts,tl,tu,tc,td,tf,tp,tv,th,t_,tm=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],ty={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};n()&&n().WeakMap&&(t_=new WeakMap);var tb=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};tb.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},tb.prototype.processLine=function(e){var t=e.indexOf(":"),r=tO(e,t),a=r[0],n=2===r.length?tE(r[1]):void 0;if("#"!==a[0])this.currentUri.uri=a,this.manifest.segments.push(this.currentUri),!this.manifest.targetDuration||"duration"in this.currentUri||(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(a){case"#EXT-X-TARGETDURATION":if(!isFinite(n)||n<0)return;this.manifest.targetDuration=n,this.setHoldBack();break;case"#EXT-X-PART-INF":tg(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case"#EXT-X-SERVER-CONTROL":tg(this.manifest,r),this.setHoldBack();break;case"#EXTINF":0===n?this.currentUri.duration=.01:n>0&&(this.currentUri.duration=n);break;case"#EXT-X-PROGRAM-DATE-TIME":var i=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=i),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=i;break;case"#EXT-X-VERSION":tg(this.manifest,r);break;case"#EXT-X-SESSION-DATA":var o=T(tD(r[1]));Object.assign(this.manifest.sessionData,o)}},tb.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,r=e.targetDuration,a=e.partTargetDuration;if(t){var n="holdBack",i="partHoldBack",o=r&&3*r,s=a&&2*a;r&&!t.hasOwnProperty(n)&&(t[n]=o),o&&t[n]<o&&(t[n]=o),a&&!t.hasOwnProperty(i)&&(t[i]=3*a),a&&t[i]<s&&(t[i]=s)}};var tg=function(e,t){var r,a=tw(t[0].replace("#EXT-X-",""));tx(t[1])?(r={},r=Object.assign(tk(t[1]),r)):r=tE(t[1]),e[a]=r},tw=function(e){return e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},tE=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},tT=function(e){var t={},r=e.split("=");return r.length>1&&(t[tw(r[0])]=tE(r[1])),t},tk=function(e){for(var t=e.split(","),r={},a=0;t.length>a;a++)r=Object.assign(tT(t[a]),r);return r},tx=function(e){return e.indexOf("=")>-1},tO=function(e,t){return -1===t?[e]:[e.substring(0,t),e.substring(t+1)]},tD=function(e){var t={};if(e){var r=e.search(",");return[e.slice(0,r),e.slice(r+1)].forEach(function(e,r){for(var a=e.replace(/['"]+/g,"").split("="),n=0;n<a.length;n++)"DATA-ID"===a[n]&&(t["DATA-ID"]=a[1-n]),"VALUE"===a[n]&&(t.VALUE=a[1-n])}),{data:t}}},tR={safeCall:function(e,t,r,a){var n=a;if(e&&"function"==typeof e[t])try{n=e[t].apply(e,r)}catch(e){f.info("safeCall error",e)}return n},safeIncrement:y,getComputedStyle:function(e,t){var r;if(e&&t&&n()&&"function"==typeof n().getComputedStyle)return t_&&t_.has(e)&&(r=t_.get(e)),r||(r=n().getComputedStyle(e,null),t_&&t_.set(e,r)),r.getPropertyValue(t)},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:w,cdnHeadersToRequestId:E,extractHostnameAndDomain:_,extractHostname:h,manifestParser:tb,generateShortID:o,generateUUID:i,now:v.now};function tA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var tS={},tP=function e(t){var r=arguments;"string"==typeof t?e.hasOwnProperty(t)?n().setTimeout(function(){r=Array.prototype.splice.call(r,1),e[t].apply(null,r)},0):f.warn("`"+t+"` is an unknown task"):"function"==typeof t?n().setTimeout(function(){t(e)},0):f.warn("`"+t+"` is invalid.")},tL={loaded:v.now(),NAME:"mux-embed",VERSION:"4.24.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,r){var a=e0(l(t),3),n=a[0],i=a[1],o=a[2],s=e.log,u=e.utils.getComputedStyle,c=e.utils.secondsToMs;if(!n)return s.error("No element was found with the `"+i+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+i+"` was not a media element.");n.mux&&(n.mux.destroy(),delete n.mux,s.warn("Already monitoring this video element, replacing existing event listeners")),(r=Object.assign({automaticErrorTracking:!0},r)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},r.data),r.getPlayheadTime=function(){return c(n.currentTime)},r.getStateData=function(){var e,t,a=this.hlsjs&&this.hlsjs.url,i=this.dashjs&&eX("function"===this.dashjs.getSource)&&this.dashjs.getSource(),o={player_is_paused:n.paused,player_playhead_time:c(n.currentTime),player_width:parseInt(u(n,"width")),player_height:parseInt(u(n,"height")),player_autoplay_on:n.autoplay,player_preload_on:n.preload,player_language_code:n.lang,player_is_fullscreen:e$()&&!!(e$().fullscreenElement||e$().webkitFullscreenElement||e$().mozFullScreenElement||e$().msFullscreenElement),video_poster_url:n.poster,video_source_url:a||i||n.currentSrc,video_source_duration:c(n.duration),video_source_height:n.videoHeight,video_source_width:n.videoWidth,view_dropped_frame_count:null===(e=n)||void 0===e||null===(t=e.getVideoPlaybackQuality)||void 0===t?void 0:t.call(e).droppedVideoFrames},s=r.getPlayheadTime();if(n.getStartDate&&s>0){var l=n.getStartDate();if(l&&"function"==typeof l.getTime&&l.getTime()){var d=l.getTime();if(o.player_program_time=d+s,n.seekable.length>0){var f=d+n.seekable.end(n.seekable.length-1);o.player_live_edge_program_time=f}}}return o},n.mux=n.mux||{},n.mux.deleted=!1,n.mux.emit=function(t,r){e.emit(i,t,r)};var d=function(){s.error("The monitor for this video element has already been destroyed.")};n.mux.destroy=function(){Object.keys(n.mux.listeners).forEach(function(e){n.removeEventListener(e,n.mux.listeners[e],!1)}),delete n.mux.listeners,n.mux.destroy=d,n.mux.swapElement=d,n.mux.emit=d,n.mux.addHLSJS=d,n.mux.addDashJS=d,n.mux.removeHLSJS=d,n.mux.removeDashJS=d,n.mux.deleted=!0,e.emit(i,"destroy")},n.mux.swapElement=function(t){var r=e0(l(t),3),a=r[0],i=r[1],o=r[2];return a?"video"!==o&&"audio"!==o?e.log.error("The element of `"+i+"` was not a media element."):(a.muxId=n.muxId,delete n.muxId,a.mux=a.mux||{},a.mux.listeners=Object.assign({},n.mux.listeners),delete n.mux.listeners,Object.keys(a.mux.listeners).forEach(function(e){n.removeEventListener(e,a.mux.listeners[e],!1),a.addEventListener(e,a.mux.listeners[e],!1)}),a.mux.swapElement=n.mux.swapElement,a.mux.destroy=n.mux.destroy,delete n.mux,void(n=a)):e.log.error("No element was found with the `"+i+"` query selector.")},n.mux.addHLSJS=function(t){e.addHLSJS(i,t)},n.mux.addDashJS=function(t){e.addDashJS(i,t)},n.mux.removeHLSJS=function(){e.removeHLSJS(i)},n.mux.removeDashJS=function(){e.removeDashJS(i)},e.init(i,r),e.emit(i,"playerready"),n.paused||(e.emit(i,"play"),n.readyState>2&&e.emit(i,"playing")),n.mux.listeners={},tm.forEach(function(t){("error"!==t||r.automaticErrorTracking)&&(n.mux.listeners[t]=function(){var r={};if("error"===t){if(!n.error||1===n.error.code)return;r.player_error_code=n.error.code,r.player_error_message=ty[n.error.code]||n.error.message}e.emit(i,t,r)},n.addEventListener(t,n.mux.listeners[t],!1))})}(tP,e,t)},destroyMonitor:function(e){var t,r=(function(e){if(Array.isArray(e))return e}(t=l(e))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}}(t,1)||function(e,t){if(e){if("string"==typeof e)return tA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tA(e,t):void 0}}(t,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];r&&r.mux&&"function"==typeof r.mux.destroy?r.mux.destroy():f.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var r=s(e);tS[r]?tS[r].addHLSJS(t):f.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(e,t){var r=s(e);tS[r]?tS[r].addDashJS(t):f.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(e){var t=s(e);tS[t]?tS[t].removeHLSJS():f.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=s(e);tS[t]?tS[t].removeDashJS():f.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){p()&&t&&t.respectDoNotTrack&&f.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=s(e);tS[r]=new eK(tP,r,t)},emit:function(e,t,r){var a=s(e);tS[a]?(tS[a].emit(t,r),"destroy"===t&&delete tS[a]):f.error("A monitor for `"+a+"` has not been initialized.")},checkDoNotTrack:p,log:f,utils:tR,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(tP,tL),void 0!==n()&&"function"==typeof n().addEventListener&&n().addEventListener("pagehide",function(e){e.persisted||(tP.WINDOW_UNLOADING=!0)},!1);var tq=tP},655:function(e,t,r){var a;function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e);/*!
 * JavaScript Cookie v2.1.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */}!function(i){var o=!1;if(void 0===(a="function"==typeof i?i.call(t,r,t,e):i)||(e.exports=a),o=!0,"object"===n(t)&&(e.exports=i(),o=!0),!o){var s=window.Cookies,l=window.Cookies=i();l.noConflict=function(){return window.Cookies=s,l}}}(function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var a in r)t[a]=r[a]}return t};return function t(r){function a(t,n,i){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},a.defaults,i)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch(e){}return n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",n,i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}t||(o={});for(var l=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var d=l[c].split("="),f=d.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var p=d[0].replace(u,decodeURIComponent);if(f=r.read?r.read(f,p):r(f,p)||f.replace(u,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===p){o=f;break}t||(o[p]=f)}catch(e){}}return o}}return a.set=a,a.get=function(e){return a.call(a,e)},a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(t,r){a(t,"",e(r,{expires:-1}))},a.withConverter=t,a}(function(){})})},153:function(e,t,r){var a,n=void 0!==r.g?r.g:"undefined"!=typeof window?window:{},i=r(558);"undefined"!=typeof document?a=document:(a=n["__GLOBAL_DOCUMENT_CACHE@4"])||(a=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=a},48:function(e,t,r){var a;a="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},e.exports=a},640:function(e,t,r){var a,n;void 0===(n="function"==typeof(a=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function n(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(t,r){for(var n=0;n<a.length;n++){var i=a[n];this[i]=n<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function s(e,r,a){return function(){typeof console!==t&&(o.call(this,r,a),this[e].apply(this,arguments))}}function l(a,o,l){var u;return"debug"===(u=a)&&(u="log"),typeof console!==t&&("trace"===u&&r?i:void 0!==console[u]?n(console,u):void 0!==console.log?n(console,"log"):e)||s.apply(this,arguments)}function u(e,r,n){var i,s=this;r=null==r?"WARN":r;var u="loglevel";function c(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,a=r.indexOf(encodeURIComponent(u)+"=");-1!==a&&(e=/^([^;]+)/.exec(r.slice(a))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=n||l,s.getLevel=function(){return i},s.setLevel=function(r,n){if("string"==typeof r&&void 0!==s.levels[r.toUpperCase()]&&(r=s.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(i=r,!1!==n&&function(e){var r=(a[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+r+";"}catch(e){}}}(r),o.call(s,r,e),typeof console===t&&r<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){r=e,c()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(r,!1),function(){if(typeof window!==t&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var d=c();null==d&&(d=r),s.setLevel(d,!1)}var c=new u,d={};c.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new u(e,c.getLevel(),c.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return c.noConflict=function(){return typeof window!==t&&window.log===c&&(window.log=f),c},c.getLoggers=function(){return d},c.default=c,c})?a.call(t,r,t,e):a)||(e.exports=n)},375:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function a(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function n(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){var a,i,o=[];for(i in"string"!=typeof(t=t||"")&&(t="?"),e)if(r.call(e,i)){if((a=e[i])||null!=a&&!isNaN(a)||(a=""),i=n(i),a=n(a),null===i||null===a)continue;o.push(i+"="+a)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var i=a(t[1]),o=a(t[2]);null===i||null===o||i in n||(n[i]=o)}return n}},558:function(){}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,r),i.exports}return r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r(80)}()},4358:function(){},820:function(){},2703:function(e,t,r){"use strict";var a=r(414);function n(){}function i(){}i.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,i,o){if(o!==a){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r,r}},5697:function(e,t,r){e.exports=r(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4062:function(e,t,r){"use strict";r.d(t,{Z:function(){return es}});var a=r(7294),n=r(5697),i=r(4125),o=r(4560),s=class extends Error{constructor(e,t=s.MEDIA_ERR_CUSTOM,r){var a;super(e),this.name="MediaError",this.code=t,this.fatal=null!=r?r:t>=s.MEDIA_ERR_NETWORK&&t<=s.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(a=s.defaultMessages[this.code])?a:"")}},l=s;l.MEDIA_ERR_ABORTED=1,l.MEDIA_ERR_NETWORK=2,l.MEDIA_ERR_DECODE=3,l.MEDIA_ERR_SRC_NOT_SUPPORTED=4,l.MEDIA_ERR_ENCRYPTED=5,l.MEDIA_ERR_CUSTOM=100,l.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var u=e=>null==e,c=(e,t)=>!u(t)&&e in t,d={ANY:"any",MUTED:"muted"},f={VOD:"on-demand",ON_DEMAND:"on-demand",LIVE:"live",LL_LIVE:"ll-live",DVR:"live:dvr",LL_DVR:"ll-live:dvr"},p={MSE:"mse",NATIVE:"native"},v={HEADER:"header",QUERY:"query",NONE:"none"},h=(Object.values(v),{M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"}),_={HLS:h.M3U8},m=(Object.keys(_),[...Object.values(h),"hls","HLS"]),y=(e,t,r,a,n=e)=>{n.addEventListener(t,r,a),e.addEventListener("teardown",()=>{n.removeEventListener(t,r)},{once:!0})},b=e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]},g=e=>{let t=e.type;if(t){let e=t.toUpperCase();return c(e,_)?_[e]:t}let{src:r}=e;return r?w(r):""},w=e=>{let t="";try{t=new URL(e).pathname}catch{console.error("invalid url")}let r=t.lastIndexOf(".");if(r<0)return"";let a=t.slice(r+1).toUpperCase();return c(a,h)?h[a]:""},E=Object.values(d),T=e=>"boolean"==typeof e||"string"==typeof e&&E.includes(e),k=({autoplay:e},t,r)=>{let a=!1,n=!1,i=T(e)?e:!!e,s=()=>{a||y(t,"playing",()=>{a=!0},{once:!0})};if(s(),y(t,"loadstart",()=>{a=!1,s(),x(t,i)},{once:!0}),y(t,"loadstart",()=>{r||(n=!Number.isFinite(t.duration)),x(t,i)},{once:!0}),r&&r.once(o.Events.LEVEL_LOADED,(e,t)=>{var r;n=null!=(r=t.details.live)&&r}),!i){let e=()=>{!n||(null!=r&&r.liveSyncPosition?t.currentTime=r.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};r&&y(t,"play",()=>{"metadata"===t.preload?r.once(o.Events.LEVEL_UPDATED,e):e()},{once:!0})}return e=>{a||x(t,i=T(e)?e:!!e)}},x=(e,t)=>{if(!t)return;let r=e.muted,a=()=>e.muted=r;switch(t){case d.ANY:e.play().catch(()=>{e.muted=!0,e.play().catch(a)});break;case d.MUTED:e.muted=!0,e.play().catch(a);break;default:e.play().catch(()=>{})}},O=({preload:e,src:t},r,a)=>{let n=e=>{null!=e&&["","none","metadata","auto"].includes(e)?r.setAttribute("preload",e):r.removeAttribute("preload")};if(!a)return n(e),n;let i=!1,o=!1,s=a.config.maxBufferLength,l=a.config.maxBufferSize,u=e=>{n(e);let t=null!=e?e:r.preload;o||"none"===t||("metadata"===t?(a.config.maxBufferLength=1,a.config.maxBufferSize=1):(a.config.maxBufferLength=s,a.config.maxBufferSize=l),c())},c=()=>{!i&&t&&(i=!0,a.loadSource(t))};return y(r,"play",()=>{o=!0,a.config.maxBufferLength=s,a.config.maxBufferSize=l,c()},{once:!0}),u(e),u};function D(e,t,r,a,n){let i=document.createElement("track");return i.kind=t,i.label=r,a&&(i.srclang=a),n&&(i.id=n),i.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",i.setAttribute("data-removeondestroy",""),e.append(i),i.track}var R="cuepoints",A=Object.freeze({label:R}),S=(e,{label:t=R}=A)=>{var r;return null==(r=Array.from(e.querySelectorAll("track")).find(e=>e.track.label===t&&"metadata"===e.track.kind))?void 0:r.track};async function P(e,t,r=A){let a=S(e,r);if(!a){let{label:t=R}=r;(a=D(e,"metadata",t)).mode="hidden",await new Promise(e=>setTimeout(()=>e(void 0),0))}return"hidden"!==a.mode&&(a.mode="hidden"),[...t].sort(({time:e},{time:t})=>t-e).forEach(({time:t,value:r})=>{var n,i;let o=Array.prototype.findIndex.call(null==a?void 0:a.cues,e=>e.startTime>=t),s=null==(n=null==a?void 0:a.cues)?void 0:n[o],l=s?s.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,u=null==(i=null==a?void 0:a.cues)?void 0:i[o-1];u&&(u.endTime=t);let c=new VTTCue(t,l,JSON.stringify(null!=r?r:null));a.addCue(c)}),a}var L=e=>({time:e.startTime,value:JSON.parse(e.text)});async function q(e,t=A){return new Promise(r=>{y(e,"loadstart",async()=>{let a=await P(e,[],t);y(e,"cuechange",()=>{let t=function(e,t={label:R}){var r;let a=S(e,t);if(null!=(r=null==a?void 0:a.activeCues)&&r.length)return L(a.activeCues[0])}(e);if(t){let r=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(r)}},{},a),r(a)})})}var I,j,C,N=-1!==(null!=(j=null==(I=null==globalThis?void 0:globalThis.navigator)?void 0:I.userAgent)?j:"").toLowerCase().indexOf("android"),M=new WeakMap,H="mux.com",B=null==(C=o.isSupported)?void 0:C.call(o),U=()=>i.utils.now(),F=i.utils.generateUUID,V=(e,{domain:t=H,maxResolution:r=""}={})=>{if(!e)return;let[a,n=""]=b(e),i=new URL(`https://stream.${t}/${a}.m3u8${n}`);return r&&i.searchParams.set("max_resolution",r),i.toString()},z=e=>{if(!e)return;let[t]=e.split("?");return t||void 0},Z=e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0},W=e=>{var t,r,a;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:$(e)&&null!=(a=null!=(r=z(e.playbackId))?r:Z(e.src))?a:e.src},G=(e,t,r)=>{Q(t,r);let{metadata:a={}}=e,{view_session_id:n=F()}=a,i=W(e);a.view_session_id=n,a.video_id=i,e.metadata=a,M.set(t,{});let o=K(e,t);X(e,t,o),ee(e,t,o),q(t);let s=k(e,t,o),l=O(e,t,o);return{engine:o,setAutoplay:s,setPreload:l}},Q=(e,t)=>{let r=null==t?void 0:t.engine;r&&(r.detachMedia(),r.destroy()),(null==e?void 0:e.mux)&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",er),e.removeEventListener("error",ea),e.removeEventListener("durationchange",et),M.delete(e),e.dispatchEvent(new Event("teardown")))};function J(e,t){var r;let a=g(e);if(a!==h.M3U8)return!0;let n=!a||null==(r=t.canPlayType(a))||r,{preferPlayback:i}=e,o=i===p.MSE,s=i===p.NATIVE;return n&&(s||!(B&&(o||N)))}var K=(e,t)=>{let{debug:r,streamType:a,startTime:n=-1,metadata:i,preferCmcd:s}=e,l=g(e)===h.M3U8,u=J(e,t);if(l&&!u&&B){let e=Y(a),t=s!==v.NONE?{useHeaders:s===v.HEADER,sessionId:i.view_session_id,contentId:i.video_id}:void 0;return new o({debug:r,startPosition:n,cmcd:t,backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,...e})}},Y=e=>[f.LIVE,f.DVR].includes(e)?{backBufferLength:8}:[f.LL_LIVE,f.LL_DVR].includes(e)?{backBufferLength:4,maxFragLookUpTolerance:.001}:{},$=({playbackId:e,src:t,customDomain:r})=>{if(e)return!0;if("string"!=typeof t)return!1;let a=null==window?void 0:window.location.href,n=new URL(t,a).hostname.toLocaleLowerCase();return n.includes(H)||!!r&&n.includes(r.toLocaleLowerCase())},X=(e,t,r)=>{var a;let{envKey:n}=e,s=$(e);if(n||s){let{playerInitTime:s,playerSoftwareName:l,playerSoftwareVersion:u,beaconCollectionDomain:c,debug:d,disableCookies:f}=e,p={...e.metadata,video_title:(null==(a=null==e?void 0:e.metadata)?void 0:a.video_title)||void 0},v=t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t);i.monitor(t,{debug:d,beaconCollectionDomain:c,hlsjs:r,Hls:r?o:void 0,automaticErrorTracking:!1,errorTranslator:v,disableCookies:f,data:{...n?{env_key:n}:{},player_software_name:l,player_software:l,player_software_version:u,player_init_time:s,...p}})}},ee=(e,t,r)=>{var a;let n=J(e,t),{src:i}=e;t&&n?("string"==typeof i?(t.setAttribute("src",i),e.startTime&&((null!=(a=M.get(t))?a:{}).startTime=e.startTime,t.addEventListener("durationchange",et,{once:!0}))):t.removeAttribute("src"),t.addEventListener("error",er),t.addEventListener("error",ea),t.addEventListener("emptied",()=>{t.querySelectorAll("track[data-removeondestroy]").forEach(e=>{e.remove()})},{once:!0})):r&&i?(r.on(o.Events.ERROR,(e,r)=>{let a={[o.ErrorTypes.NETWORK_ERROR]:l.MEDIA_ERR_NETWORK,[o.ErrorTypes.MEDIA_ERROR]:l.MEDIA_ERR_DECODE},n=new l("",a[r.type]);n.fatal=r.fatal,n.data=r,t.dispatchEvent(new CustomEvent("error",{detail:n}))}),t.addEventListener("error",ea),function(e,t){t.on(o.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(r,{tracks:a})=>{a.forEach(r=>{var a;let n=null!=(a=r.subtitleTrack)?a:r.closedCaptions,i=t.subtitleTracks.findIndex(({lang:e,name:t,type:a})=>e==(null==n?void 0:n.lang)&&t===r.label&&a.toLowerCase()===r.kind);D(e,r.kind,r.label,null==n?void 0:n.lang,`${r.kind}${i}`)})});let r=()=>{var r;if(!t.subtitleTracks.length)return;let a=Array.from(e.textTracks).find(e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind)),n=`${null==(r=t.subtitleTracks[t.subtitleTrack])?void 0:r.type.toLowerCase()}${t.subtitleTrack}`;if(a&&(t.subtitleTrack<0||(null==a?void 0:a.id)!==n)){let e=t.subtitleTracks.findIndex(({lang:e,name:t,type:r})=>e==a.language&&t===a.label&&r.toLowerCase()===a.kind);t.subtitleTrack=e}a&&(null==a?void 0:a.id)===n&&a.cues&&Array.from(a.cues).forEach(e=>{a.addCue(e)})};e.textTracks.addEventListener("change",r),t.on(o.Events.CUES_PARSED,(t,{track:r,cues:a})=>{let n=e.textTracks.getTrackById(r);if(!n)return;let i="disabled"===n.mode;i&&(n.mode="hidden"),a.forEach(e=>{var t;null!=(t=n.cues)&&t.getCueById(e.id)||n.addCue(e)}),i&&(n.mode="disabled")}),t.once(o.Events.DESTROYING,()=>{e.textTracks.removeEventListener("change",r),e.querySelectorAll("track[data-removeondestroy]").forEach(e=>{e.remove()})});let a=()=>{Array.from(e.textTracks).forEach(t=>{var r,a;if(!["subtitles","caption"].includes(t.kind)&&"thumbnails"===t.label){if(!(null!=(r=t.cues)&&r.length)){let t=e.querySelector('track[label="thumbnails"]'),r=null!=(a=null==t?void 0:t.getAttribute("src"))?a:"";null==t||t.removeAttribute("src"),setTimeout(()=>{null==t||t.setAttribute("src",r)},0)}"hidden"!==t.mode&&(t.mode="hidden")}})};t.once(o.Events.MANIFEST_LOADED,a),t.once(o.Events.MEDIA_ATTACHED,a)}(t,r),r.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function et(e){var t;let r=e.target,a=null==(t=M.get(r))?void 0:t.startTime;if(a&&function(e,t,r){t&&r>t&&(r=t);for(let t=0;t<e.length;t++)if(e.start(t)<=r&&e.end(t)>=r)return!0;return!1}(r.seekable,r.duration,a)){let e="auto"===r.preload;e&&(r.preload="none"),r.currentTime=a,e&&(r.preload="auto")}}async function er(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(!(null!=t&&t.error))return;let{message:r,code:a}=t.error,n=new l(r,a);if(t.src&&(a!==l.MEDIA_ERR_DECODE||void 0!==a))try{let{status:e}=await fetch(t.src);n.data={response:{code:e}}}catch{}t.dispatchEvent(new CustomEvent("error",{detail:n}))}function ea(e){var t,r;if(!(e instanceof CustomEvent)||!(e.detail instanceof l))return;let a=e.target,n=e.detail;n&&n.fatal&&((null!=(t=M.get(a))?t:{}).error=n,null==(r=a.mux)||r.emit("error",{player_error_code:n.code,player_error_message:n.message}))}var en=(...e)=>{let t=(0,a.useRef)(null);return(0,a.useEffect)(()=>{e.forEach(e=>{e&&("function"==typeof e?e(t.current):e.current=t.current)})},[e]),t},ei=(()=>{try{return"0.7.7"}catch{}return"UNKNOWN"})(),eo=a.forwardRef((e,t)=>{var r;let{playbackId:n,src:i,children:o,autoPlay:s,preload:l,...u}=e,[c]=(0,a.useState)(U()),[d,f]=(0,a.useState)(null!=(r=V(n))?r:i),p=(0,a.useRef)(void 0),v=en((0,a.useRef)(null),t);return(0,a.useEffect)(()=>{var e;f(null!=(e=V(n))?e:i)},[i,n]),(0,a.useEffect)(()=>{let t={...e,src:d,playerInitTime:c,playerSoftwareName:"mux-video-react",playerSoftwareVersion:ei,autoplay:s},r=v.current;return r&&(p.current=G(t,r,p.current)),()=>{Q(r,p.current),r=void 0,p.current=void 0}},[d]),(0,a.useEffect)(()=>{var e;null==(e=p.current)||e.setAutoplay(s)},[s]),(0,a.useEffect)(()=>{var e;null==(e=p.current)||e.setPreload(l)},[l]),a.createElement("video",{ref:v,...u},o)});eo.propTypes={envKey:n.string,debug:n.bool,disableCookies:n.bool,metadata:n.any,beaconCollectionDomain:n.string,playbackId:n.string,playerInitTime:n.number,preferPlayback:n.oneOf(Object.values(p)),type:n.oneOf(m),streamType:n.oneOf(Object.values(f)),startTime:n.number};var es=eo}}]);